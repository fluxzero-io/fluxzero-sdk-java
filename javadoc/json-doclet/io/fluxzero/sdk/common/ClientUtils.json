{
  "name" : "ClientUtils",
  "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils",
  "packageName" : "io.fluxzero.sdk.common",
  "kind" : "class",
  "modifiers" : [ "public" ],
  "annotations" : [ {
    "annotationType" : "lombok.extern.slf4j.Slf4j",
    "values" : {}
  } ],
  "documentation" : " Utility class offering client-side support functions for working with Fluxzero.\n <p>\n Unlike {@link io.fluxzero.common.ObjectUtils}, this class is specifically intended for use within Fluxzero client\n applications and can make use of infrastructure components such as\n {@link io.fluxzero.sdk.Fluxzero}.\n <p>\n It provides convenience methods for:\n <ul>\n   <li>Memoization with lifespans via Fluxzero's clock</li>\n   <li>Topic resolution for annotated handler methods</li>\n   <li>Determining whether handlers are local or self-tracking</li>\n   <li>Time-bound execution blocking</li>\n   <li>Safe annotation parsing and revision introspection</li>\n   <li>Truncating {@link java.time.temporal.Temporal} values</li>\n </ul>\n",
  "typeParameters" : [ ],
  "superClass" : "java.lang.Object",
  "interfaces" : [ ],
  "fields" : [ {
    "name" : "ignoreMarker",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils.ignoreMarker",
    "type" : "org.slf4j.Marker",
    "modifiers" : [ "final", "public", "static" ],
    "annotations" : [ ],
    "documentation" : " A marker used to denote specific log entries that should be ignored or treated differently, typically to bypass\n error handling in logging frameworks.\n <p>\n This marker is created using the {@code MarkerFactory} with the identifier \"ignoreError\". It can be useful in\n scenarios where certain log messages need to be flagged for exclusion from error-reporting workflows.\n",
    "constantValue" : null
  }, {
    "name" : "localHandlerCache",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils.localHandlerCache",
    "type" : "java.util.function.BiFunction<java.lang.Class<?>,java.lang.reflect.Executable,java.util.Optional<io.fluxzero.sdk.tracking.handling.LocalHandler>>",
    "modifiers" : [ "final", "private", "static" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "searchParametersCache",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils.searchParametersCache",
    "type" : "java.util.function.Function<java.lang.Class<?>,io.fluxzero.sdk.modeling.SearchParameters>",
    "modifiers" : [ "final", "private", "static" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "trackSelfCache",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils.trackSelfCache",
    "type" : "java.util.function.BiFunction<java.lang.Class<?>,java.lang.reflect.Executable,java.util.Optional<io.fluxzero.sdk.tracking.TrackSelf>>",
    "modifiers" : [ "final", "private", "static" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  } ],
  "constructors" : [ {
    "name" : "ClientUtils",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#ClientUtils",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  } ],
  "methods" : [ {
    "name" : "determineSearchCollection",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#determineSearchCollection",
    "returnType" : "java.lang.String",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "c",
      "type" : "java.lang.@lombok.NonNull Object",
      "varArgs" : false,
      "annotations" : [ {
        "annotationType" : "lombok.NonNull",
        "values" : {}
      } ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Determines the collection name used for document indexing and search based on the annotated handler or document\n type.\n"
  }, {
    "name" : "getLocalHandlerAnnotation",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#getLocalHandlerAnnotation",
    "returnType" : "java.util.Optional<io.fluxzero.sdk.tracking.handling.LocalHandler>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "handlerInvoker",
      "type" : "io.fluxzero.common.handling.HandlerInvoker",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Retrieves the {@link LocalHandler} annotation associated with a given handler, from its method, its declaring\n class, or ancestral package, if present.\n"
  }, {
    "name" : "getLocalHandlerAnnotation",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#getLocalHandlerAnnotation",
    "returnType" : "java.util.Optional<io.fluxzero.sdk.tracking.handling.LocalHandler>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "target",
      "type" : "java.lang.Class<?>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "method",
      "type" : "java.lang.reflect.Executable",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Retrieves the {@link LocalHandler} annotation associated with a given method, its declaring class, or ancestral\n package, if present.\n"
  }, {
    "name" : "getRevisionNumber",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#getRevisionNumber",
    "returnType" : "int",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "object",
      "type" : "java.lang.Object",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Extracts the revision number from the {@link Revision} annotation on the given object’s class.\n\n @return the revision number, or 0 if not present\n"
  }, {
    "name" : "getSearchParameters",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#getSearchParameters",
    "returnType" : "io.fluxzero.sdk.modeling.SearchParameters",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "type",
      "type" : "java.lang.Class<?>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Returns the effective {@link SearchParameters} for the given type, using the {@link Searchable} annotation.\n Defaults to a collection name matching the class’s simple name if not explicitly set.\n"
  }, {
    "name" : "getTopic",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#getTopic",
    "returnType" : "java.lang.String",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "handleDocument",
      "type" : "io.fluxzero.sdk.tracking.handling.HandleDocument",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "executable",
      "type" : "java.lang.reflect.Executable",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Extracts the topic associated with a given {@link HandleDocument} annotation or {@link Executable}. The topic is\n determined based on the document collection name, the associated document class, or parameter type of the\n executable.\n\n @param handleDocument the {@link HandleDocument} annotation containing metadata about the document handler. Can\n                       specify the document collection or class.\n @param executable     the {@link Executable} (e.g., method or constructor) used to infer the topic if the\n                       annotation does not provide one. The parameter type of the executable may determine the\n                       topic.\n @return the topic as a String, or {@code null} if no valid topic is determined.\n"
  }, {
    "name" : "getTopics",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#getTopics",
    "returnType" : "java.util.Set<java.lang.String>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "messageType",
      "type" : "io.fluxzero.common.MessageType",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "handler",
      "type" : "java.lang.Object",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Extracts all topics associated with the given handler object and message type.\n <p>\n The topics are derived based on the handler's annotations or inferred class properties. This method delegates the\n operation to another overload which processes a collection of handler classes.\n\n @param messageType the type of the message (e.g., DOCUMENT or CUSTOM)\n @param handler     the handler object used to determine topics\n @return a set of topic names associated with the handler and message type\n"
  }, {
    "name" : "getTopics",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#getTopics",
    "returnType" : "java.util.Set<java.lang.String>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "messageType",
      "type" : "io.fluxzero.common.MessageType",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "handlerClasses",
      "type" : "java.util.Collection<java.lang.Class<?>>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Extracts all topics from {@link HandleDocument} or {@link HandleCustom} annotated methods for the given classes.\n\n @param messageType    the type of message (DOCUMENT or CUSTOM)\n @param handlerClasses the classes to inspect\n @return a set of topic names\n"
  }, {
    "name" : "isLocalHandler",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#isLocalHandler",
    "returnType" : "boolean",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "invoker",
      "type" : "io.fluxzero.common.handling.HandlerInvoker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "message",
      "type" : "io.fluxzero.sdk.common.HasMessage",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Determines if the specified handler method handles messages locally. A handler is considered a local if it is\n explicitly annotated as such using {@link LocalHandler} or meets the criteria for local self-handling, i.e.:\n {@link #isLocalSelfHandler} returns {@code true}.\n"
  }, {
    "name" : "isLocalSelfHandler",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#isLocalSelfHandler",
    "returnType" : "boolean",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "invoker",
      "type" : "io.fluxzero.common.handling.HandlerInvoker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "message",
      "type" : "io.fluxzero.sdk.common.HasMessage",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Returns whether the handler method should only handle messages from the same instance (\"self\"). This is true when\n the handler’s payload type equals the message type and no {@link TrackSelf} annotation is present.\n"
  }, {
    "name" : "isSelfHandler",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#isSelfHandler",
    "returnType" : "boolean",
    "modifiers" : [ "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "invoker",
      "type" : "io.fluxzero.common.handling.HandlerInvoker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "message",
      "type" : "io.fluxzero.sdk.common.HasMessage",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "isSelfTracking",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#isSelfTracking",
    "returnType" : "boolean",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ {
      "annotationType" : "java.lang.SuppressWarnings",
      "values" : {
        "value" : "\"BooleanMethodIsAlwaysInverted\""
      }
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "target",
      "type" : "java.lang.Class<?>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "method",
      "type" : "java.lang.reflect.Executable",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Returns whether the specified method or its declaring class is marked with {@link TrackSelf}.\n\n @param target the handler class\n @param method the method to inspect\n @return {@code true} if marked for self-tracking, {@code false} otherwise\n"
  }, {
    "name" : "isTrackingHandler",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#isTrackingHandler",
    "returnType" : "boolean",
    "modifiers" : [ "static" ],
    "annotations" : [ {
      "annotationType" : "java.lang.SuppressWarnings",
      "values" : {
        "value" : "\"SameParameterValue\""
      }
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "target",
      "type" : "java.lang.Class<?>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "method",
      "type" : "java.lang.reflect.Executable",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "memoize",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#memoize",
    "returnType" : "io.fluxzero.common.MemoizingBiFunction<T,U,R>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ "T", "U", "R" ],
    "parameters" : [ {
      "name" : "supplier",
      "type" : "java.util.function.BiFunction<T,U,R>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Memoizes the given bi-function using a default memoization strategy.\n"
  }, {
    "name" : "memoize",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#memoize",
    "returnType" : "io.fluxzero.common.MemoizingBiFunction<T,U,R>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ "T", "U", "R" ],
    "parameters" : [ {
      "name" : "supplier",
      "type" : "java.util.function.BiFunction<T,U,R>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "lifespan",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Memoizes the given bi-function using a time-based lifespan and Fluxzero's internal clock.\n"
  }, {
    "name" : "memoize",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#memoize",
    "returnType" : "io.fluxzero.common.MemoizingFunction<K,V>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ "K", "V" ],
    "parameters" : [ {
      "name" : "supplier",
      "type" : "java.util.function.Function<K,V>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Memoizes the given function using a default memoization strategy.\n"
  }, {
    "name" : "memoize",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#memoize",
    "returnType" : "io.fluxzero.common.MemoizingFunction<K,V>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ "K", "V" ],
    "parameters" : [ {
      "name" : "supplier",
      "type" : "java.util.function.Function<K,V>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "lifespan",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Memoizes the given function using a time-based lifespan and Fluxzero's internal clock.\n"
  }, {
    "name" : "memoize",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#memoize",
    "returnType" : "io.fluxzero.common.MemoizingSupplier<T>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "supplier",
      "type" : "java.util.function.Supplier<T>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Memoizes the given supplier using a default memoization strategy.\n"
  }, {
    "name" : "memoize",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#memoize",
    "returnType" : "io.fluxzero.common.MemoizingSupplier<T>",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "supplier",
      "type" : "java.util.function.Supplier<T>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "lifespan",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Memoizes the given supplier using a time-based lifespan and Fluxzero’s internal clock.\n"
  }, {
    "name" : "truncate",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#truncate",
    "returnType" : "T",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ {
      "annotationType" : "java.lang.SuppressWarnings",
      "values" : {
        "value" : "\"unchecked\""
      }
    } ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "timestamp",
      "type" : "T",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "unit",
      "type" : "java.time.temporal.TemporalUnit",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Truncates a {@link Temporal} (e.g., {@link LocalDateTime}) to the specified unit (e.g., {@code MONTHS} or\n {@code YEARS}). Automatically adjusts the truncation unit for compound units like {@code MONTHS -> DAYS}.\n\n @param timestamp the temporal value to truncate\n @param unit      the unit to truncate to\n @return a truncated version of the original value\n"
  }, {
    "name" : "waitForResults",
    "qualifiedName" : "io.fluxzero.sdk.common.ClientUtils#waitForResults",
    "returnType" : "void",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "maxDuration",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "futures",
      "type" : "java.util.Collection<? extends java.util.concurrent.Future<?>>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Blocks until all futures are complete or the maximum duration has elapsed.\n <p>\n Useful for tracking batched async operations (e.g., event publishing or indexing).\n\n @param maxDuration the maximum time to wait\n @param futures     the set of futures to wait on\n"
  } ],
  "enumConstants" : [ ],
  "recordComponents" : [ ],
  "nestedTypes" : [ ]
}
