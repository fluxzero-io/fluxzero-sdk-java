{
  "name" : "DefaultRequestHandler",
  "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler",
  "packageName" : "io.fluxzero.sdk.publishing",
  "kind" : "class",
  "modifiers" : [ "public" ],
  "annotations" : [ {
    "annotationType" : "lombok.RequiredArgsConstructor",
    "values" : {}
  }, {
    "annotationType" : "lombok.extern.slf4j.Slf4j",
    "values" : {}
  } ],
  "documentation" : " Default implementation of the {@link RequestHandler} interface.\n <p>\n This handler supports both single and batch request dispatching, tracking responses using an internal\n {@link java.util.concurrent.ConcurrentHashMap} keyed by {@code requestId}. When a request is sent, the handler\n subscribes to a corresponding result log (e.g., result or web response) via a\n {@link io.fluxzero.sdk.tracking.client.TrackingClient}, which listens for responses targeted at this client only.\n\n <p>Each request is assigned a unique {@code requestId} and tagged with the client's {@code source} identifier.\n When a response with a matching {@code requestId} is received, the corresponding {@link CompletableFuture} is\n completed.\n\n <p>If no response is received within the configured timeout (default: 200 seconds), the future is completed\n exceptionally.\n <p>\n This request handle supports chunked responses. Request senders that can deal with chunked responses should use\n {@link #sendRequest(SerializedMessage, Consumer, Duration, Consumer)}}. If a chunked response is received, but the\n request sender expected a single response, the intermediate responses are aggregated before completing the request.\n\n <p>Features:\n <ul>\n   <li>Supports both single and batch request dispatching.</li>\n   <li>Tracks responses via the configured {@link MessageType} and filters using {@code filterMessageTarget = true}.</li>\n   <li>Ensures startup of the underlying result tracker on first request dispatch.</li>\n   <li>Cleans up subscriptions and pending futures on {@link #close()}.</li>\n </ul>\n\n @see RequestHandler\n @see MessageType#RESULT\n @see MessageType#WEBRESPONSE\n",
  "typeParameters" : [ ],
  "superClass" : "java.lang.Object",
  "interfaces" : [ "io.fluxzero.sdk.publishing.RequestHandler" ],
  "fields" : [ {
    "name" : "callbacks",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.callbacks",
    "type" : "java.util.Map<java.lang.Integer,io.fluxzero.sdk.publishing.DefaultRequestHandler.ResponseCallback>",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "client",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.client",
    "type" : "io.fluxzero.sdk.configuration.client.Client",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "nextId",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.nextId",
    "type" : "java.util.concurrent.atomic.AtomicInteger",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "registration",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.registration",
    "type" : "io.fluxzero.common.Registration",
    "modifiers" : [ "private", "volatile" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "responseConsumerName",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.responseConsumerName",
    "type" : "java.lang.String",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "responseExecutor",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.responseExecutor",
    "type" : "java.util.concurrent.ExecutorService",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "resultType",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.resultType",
    "type" : "io.fluxzero.common.MessageType",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "started",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.started",
    "type" : "java.util.concurrent.atomic.AtomicBoolean",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "timeout",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler.timeout",
    "type" : "java.time.Duration",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  } ],
  "constructors" : [ {
    "name" : "DefaultRequestHandler",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#DefaultRequestHandler",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "client",
      "type" : "io.fluxzero.sdk.configuration.client.Client",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "resultType",
      "type" : "io.fluxzero.common.MessageType",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Constructs a DefaultRequestHandler with the specified client and message type, and a default timeout of 200\n seconds.\n <p>\n Uses a default name for the result consumer based on the application name.\n <p>\n Uses an unbounded virtual thread pool to complete requests.\n\n @param client     the client responsible for sending and receiving messages\n @param resultType the type of message expected as a result\n"
  }, {
    "name" : "DefaultRequestHandler",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#DefaultRequestHandler",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "client",
      "type" : "io.fluxzero.sdk.configuration.client.Client",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "resultType",
      "type" : "io.fluxzero.common.MessageType",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "timeout",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "responseConsumerName",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Constructs a DefaultRequestHandler instance, which manages request dispatching and response handling for a\n specified client and message type. Allows specifying a custom timeout duration and a response consumer name.\n <p>\n Uses an unbounded virtual thread pool to complete requests.\n\n @param client               the client responsible for sending and receiving messages\n @param resultType           the type of message expected as a result\n @param timeout              the duration to wait before the request times out\n @param responseConsumerName the name of the response consumer for managing response processing\n"
  } ],
  "methods" : [ {
    "name" : "close",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#close",
    "returnType" : "void",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "ensureStarted",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#ensureStarted",
    "returnType" : "void",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "handleResults",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#handleResults",
    "returnType" : "void",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "messages",
      "type" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "prepareRequest",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#prepareRequest",
    "returnType" : "java.util.concurrent.CompletableFuture<io.fluxzero.common.api.SerializedMessage>",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "request",
      "type" : "io.fluxzero.common.api.SerializedMessage",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "timeout",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "intermediateCallback",
      "type" : "java.util.function.Consumer<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "sendRequest",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#sendRequest",
    "returnType" : "java.util.concurrent.CompletableFuture<io.fluxzero.common.api.SerializedMessage>",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "request",
      "type" : "io.fluxzero.common.api.SerializedMessage",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "requestSender",
      "type" : "java.util.function.Consumer<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "timeout",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Sends a request and processes the response, combining intermediate responses (if any) with the final response\n data. This method ensures intermediate results are aggregated and included in the final output.\n"
  }, {
    "name" : "sendRequest",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#sendRequest",
    "returnType" : "java.util.concurrent.CompletableFuture<io.fluxzero.common.api.SerializedMessage>",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "request",
      "type" : "io.fluxzero.common.api.SerializedMessage",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "requestSender",
      "type" : "java.util.function.Consumer<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "timeout",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "intermediateCallback",
      "type" : "java.util.function.Consumer<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "sendRequests",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#sendRequests",
    "returnType" : "java.util.List<java.util.concurrent.CompletableFuture<io.fluxzero.common.api.SerializedMessage>>",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "requests",
      "type" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "requestSender",
      "type" : "java.util.function.Consumer<java.util.List<io.fluxzero.common.api.SerializedMessage>>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "sendRequests",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler#sendRequests",
    "returnType" : "java.util.List<java.util.concurrent.CompletableFuture<io.fluxzero.common.api.SerializedMessage>>",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "requests",
      "type" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "requestSender",
      "type" : "java.util.function.Consumer<java.util.List<io.fluxzero.common.api.SerializedMessage>>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "timeout",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  } ],
  "enumConstants" : [ ],
  "recordComponents" : [ ],
  "nestedTypes" : [ {
    "name" : "ResponseCallback",
    "qualifiedName" : "io.fluxzero.sdk.publishing.DefaultRequestHandler$ResponseCallback",
    "kind" : "record",
    "modifiers" : [ "final", "protected", "static" ],
    "annotations" : [ ]
  } ]
}
