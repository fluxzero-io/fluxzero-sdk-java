{
  "name" : "AggregateRepository",
  "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository",
  "packageName" : "io.fluxzero.sdk.persisting.repository",
  "kind" : "interface",
  "modifiers" : [ "abstract", "public" ],
  "annotations" : [ ],
  "documentation" : " Repository interface for loading, managing, and repairing aggregates in Fluxzero.\n <p>\n Aggregates in Fluxzero can be persisted using different storage strategies, including event sourcing and\n document-based storage (e.g., {@code DocumentStore}). The {@code AggregateRepository} abstracts these details and\n provides a unified API to interact with aggregate instances as {@link Entity} wrappers.\n\n <p>Core capabilities include:\n <ul>\n   <li>Loading aggregates by ID, whether event-sourced or document-based.</li>\n   <li>Mapping entities to their associated aggregates (e.g., for child-to-parent traversal).</li>\n   <li>Repairing relationships between entities and aggregates (especially useful after structural refactors).</li>\n   <li>Deleting aggregates and their associated data.</li>\n </ul>\n\n <p>Note: While this interface is accessible directly, most typical usage is through the static\n {@code Fluxzero.loadAggregate(...)} or via delegation\n in {@link io.fluxzero.sdk.modeling.Entity} classes.\n",
  "typeParameters" : [ ],
  "superClass" : null,
  "interfaces" : [ ],
  "fields" : [ ],
  "constructors" : [ ],
  "methods" : [ {
    "name" : "asEntity",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#asEntity",
    "returnType" : "io.fluxzero.sdk.modeling.Entity<T>",
    "modifiers" : [ "abstract", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "entity",
      "type" : "T",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Wrap an existing aggregate instance into an {@link Entity}, initializing tracking and identity information.\n\n @param entity the aggregate instance.\n @param <T>    the aggregate type.\n @return the entity wrapper.\n"
  }, {
    "name" : "deleteAggregate",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#deleteAggregate",
    "returnType" : "java.util.concurrent.CompletableFuture<java.lang.Void>",
    "modifiers" : [ "abstract", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "aggregateId",
      "type" : "java.lang.Object",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Deletes the persisted state for an aggregate, including its events or document and relationships.\n\n @param aggregateId the ID of the aggregate to delete.\n @return a future that completes when deletion has been confirmed.\n"
  }, {
    "name" : "getAggregatesFor",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#getAggregatesFor",
    "returnType" : "java.util.Map<java.lang.String,java.lang.Class<?>>",
    "modifiers" : [ "abstract", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "entityId",
      "type" : "java.lang.Object",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Returns a map of aggregate IDs and their types that are associated with a given entity ID.\n\n @param entityId the child or nested entity.\n @return a map of aggregate IDs to class names.\n"
  }, {
    "name" : "getLatestAggregateId",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#getLatestAggregateId",
    "returnType" : "java.util.Optional<java.lang.String>",
    "modifiers" : [ "default", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "entityId",
      "type" : "java.lang.Object",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Returns the most recently created aggregate ID associated with a given entity ID, if any.\n\n @param entityId the child or nested entity.\n @return the latest aggregate ID, if present.\n"
  }, {
    "name" : "load",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#load",
    "returnType" : "io.fluxzero.sdk.modeling.Entity<T>",
    "modifiers" : [ "default", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "aggregateId",
      "type" : "io.fluxzero.sdk.modeling.Id<T>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Load an aggregate by a typed identifier.\n\n @param aggregateId the typed ID of the aggregate.\n @param <T>         the aggregate type.\n @return the aggregate as a loaded {@link Entity} wrapper.\n"
  }, {
    "name" : "load",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#load",
    "returnType" : "io.fluxzero.sdk.modeling.Entity<T>",
    "modifiers" : [ "default", "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.SuppressWarnings",
      "values" : {
        "value" : "\"unchecked\""
      }
    } ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "aggregateId",
      "type" : "java.lang.@jakarta.validation.constraints.NotNull Object",
      "varArgs" : false,
      "annotations" : [ {
        "annotationType" : "jakarta.validation.constraints.NotNull",
        "values" : {}
      } ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Load an aggregate by its identifier. If the aggregate exists, it will be loaded and returned with its respective\n type, if not, an empty {@link Entity} of type {@link Object} will be returned.\n\n @param aggregateId   the aggregate identifier.\n @param <T>           the aggregate type.\n @return the loaded aggregate wrapped in an {@link Entity}.\n"
  }, {
    "name" : "load",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#load",
    "returnType" : "io.fluxzero.sdk.modeling.Entity<T>",
    "modifiers" : [ "abstract", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "aggregateId",
      "type" : "java.lang.@lombok.NonNull Object",
      "varArgs" : false,
      "annotations" : [ {
        "annotationType" : "lombok.NonNull",
        "values" : {}
      } ]
    }, {
      "name" : "aggregateType",
      "type" : "java.lang.Class<T>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Load an aggregate by its identifier and type.\n\n @param aggregateId   the aggregate identifier.\n @param aggregateType the expected class type.\n @param <T>           the aggregate type.\n @return the loaded aggregate wrapped in an {@link Entity}.\n"
  }, {
    "name" : "loadFor",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#loadFor",
    "returnType" : "io.fluxzero.sdk.modeling.Entity<T>",
    "modifiers" : [ "abstract", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ "T" ],
    "parameters" : [ {
      "name" : "entityId",
      "type" : "java.lang.@lombok.NonNull Object",
      "varArgs" : false,
      "annotations" : [ {
        "annotationType" : "lombok.NonNull",
        "values" : {}
      } ]
    }, {
      "name" : "defaultType",
      "type" : "java.lang.Class<?>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Load the aggregate that owns the specified entity.\n <p>\n If no ownership is found in the relationship index, this method may fall back to loading the entity as if it were\n an aggregate itself.\n\n @param entityId    the child or nested entity.\n @param defaultType fallback type to use when no aggregate mapping is available.\n @param <T>         the aggregate type.\n @return the loaded aggregate as an {@link Entity}.\n"
  }, {
    "name" : "repairRelationships",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#repairRelationships",
    "returnType" : "java.util.concurrent.CompletableFuture<java.lang.Void>",
    "modifiers" : [ "abstract", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "aggregate",
      "type" : "io.fluxzero.sdk.modeling.Entity<?>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Repairs the internal relationship model for a loaded aggregate.\n <p>\n This is useful when refactoring entity hierarchies or recovering from inconsistent relationship state.\n\n @param aggregate the aggregate to inspect.\n @return a future that completes when the relationships are updated.\n"
  }, {
    "name" : "repairRelationships",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#repairRelationships",
    "returnType" : "java.util.concurrent.CompletableFuture<java.lang.Void>",
    "modifiers" : [ "default", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "aggregateId",
      "type" : "io.fluxzero.sdk.modeling.Id<?>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Repairs the relationships of the aggregate corresponding to the given typed ID.\n\n @param aggregateId the typed identifier of the aggregate.\n @return a future that completes when the repair process is done.\n"
  }, {
    "name" : "repairRelationships",
    "qualifiedName" : "io.fluxzero.sdk.persisting.repository.AggregateRepository#repairRelationships",
    "returnType" : "java.util.concurrent.CompletableFuture<java.lang.Void>",
    "modifiers" : [ "default", "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "aggregateId",
      "type" : "java.lang.Object",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Repairs the relationships of the aggregate with the given ID.\n\n @param aggregateId the ID of the aggregate.\n @return a future that completes when the repair process is done.\n"
  } ],
  "enumConstants" : [ ],
  "recordComponents" : [ ],
  "nestedTypes" : [ ]
}
