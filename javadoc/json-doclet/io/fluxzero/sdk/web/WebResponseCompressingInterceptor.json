{
  "name" : "WebResponseCompressingInterceptor",
  "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor",
  "packageName" : "io.fluxzero.sdk.web",
  "kind" : "class",
  "modifiers" : [ "public" ],
  "annotations" : [ ],
  "documentation" : " A {@link DispatchInterceptor} that applies GZIP compression to outgoing {@link WebResponse} messages based on request\n headers and response size.\n <p>\n This interceptor checks whether the originating {@link WebRequest} includes an {@code Accept-Encoding} header with\n {@code gzip}. If so, and if the response body exceeds a configurable minimum size threshold, it compresses the\n response payload and adds the appropriate {@code Content-Encoding} metadata.\n\n <p>Compression is skipped in the following cases:\n <ul>\n     <li>The request was not a {@code WEBREQUEST}</li>\n     <li>The request was made over a WebSocket</li>\n     <li>The response already includes a {@code Content-Encoding} header</li>\n     <li>The response is smaller than the configured minimum byte length</li>\n </ul>\n\n <p>By default, the compression threshold is set to 2048 bytes.\n\n @see WebRequest\n @see WebResponse\n @see CompressionUtils\n",
  "typeParameters" : [ ],
  "superClass" : "java.lang.Object",
  "interfaces" : [ "io.fluxzero.sdk.publishing.DispatchInterceptor" ],
  "fields" : [ {
    "name" : "minimumLength",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor.minimumLength",
    "type" : "int",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : " Minimum payload length (in bytes) for compression to be applied.\n",
    "constantValue" : null
  } ],
  "constructors" : [ {
    "name" : "WebResponseCompressingInterceptor",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor#WebResponseCompressingInterceptor",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Creates a new interceptor with a default compression threshold of 2048 bytes.\n"
  }, {
    "name" : "WebResponseCompressingInterceptor",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor#WebResponseCompressingInterceptor",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "minimumLength",
      "type" : "int",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Creates a new interceptor with a custom compression threshold.\n\n @param minimumLength minimum payload size (in bytes) for compression to apply\n"
  } ],
  "methods" : [ {
    "name" : "acceptCompression",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor#acceptCompression",
    "returnType" : "boolean",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Checks whether the current request accepts GZIP compression. This is determined by inspecting the\n {@code Accept-Encoding} header.\n\n @return {@code true} if GZIP compression is accepted, {@code false} otherwise\n"
  }, {
    "name" : "compress",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor#compress",
    "returnType" : "io.fluxzero.common.api.SerializedMessage",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "response",
      "type" : "io.fluxzero.common.api.SerializedMessage",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Applies GZIP compression to the response payload and updates the metadata to indicate the\n {@code Content-Encoding} used.\n\n @param response the message to compress\n @return a new {@link SerializedMessage} with compressed payload and updated headers\n"
  }, {
    "name" : "interceptDispatch",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor#interceptDispatch",
    "returnType" : "io.fluxzero.sdk.common.Message",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "message",
      "type" : "io.fluxzero.sdk.common.Message",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "messageType",
      "type" : "io.fluxzero.common.MessageType",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "topic",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " No-op for message interception. This interceptor only modifies serialized messages.\n\n @param message     the message to be dispatched\n @param messageType the type of the message\n @param topic       the dispatch topic\n @return the unmodified message\n"
  }, {
    "name" : "modifySerializedMessage",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor#modifySerializedMessage",
    "returnType" : "io.fluxzero.common.api.SerializedMessage",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "response",
      "type" : "io.fluxzero.common.api.SerializedMessage",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "message",
      "type" : "io.fluxzero.sdk.common.Message",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "type",
      "type" : "io.fluxzero.common.MessageType",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "topic",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Compresses the given response message using GZIP if the request supports compression and the response meets\n compression criteria.\n\n @param response the serialized response message\n @param message  the original message\n @param type     the type of message being dispatched\n @param topic    the dispatch topic\n @return a potentially compressed {@link SerializedMessage}\n"
  }, {
    "name" : "shouldCompress",
    "qualifiedName" : "io.fluxzero.sdk.web.WebResponseCompressingInterceptor#shouldCompress",
    "returnType" : "boolean",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "serializedMessage",
      "type" : "io.fluxzero.common.api.SerializedMessage",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "response",
      "type" : "io.fluxzero.sdk.web.WebResponse",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Determines whether the given serialized message should be compressed based on specific criteria.\n <p>\n A message will <strong>not</strong> be compressed if:\n <ul>\n   <li>The \"X-Compression\" header explicitly disables compression.</li>\n   <li>The Content-Type of the message indicates that it is a media type (image, video, audio, or application/octet-stream).</li>\n   <li>The \"Content-Encoding\" header is already present in the message.</li>\n   <li>The HTTP status code of the response is not 200.</li>\n   <li>The size of the message's payload is below the predefined threshold.</li>\n </ul>\n"
  } ],
  "enumConstants" : [ ],
  "recordComponents" : [ ],
  "nestedTypes" : [ ]
}
