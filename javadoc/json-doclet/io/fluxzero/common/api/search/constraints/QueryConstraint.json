{
  "name" : "QueryConstraint",
  "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint",
  "packageName" : "io.fluxzero.common.api.search.constraints",
  "kind" : "class",
  "modifiers" : [ "public" ],
  "annotations" : [ {
    "annotationType" : "lombok.Value",
    "values" : {}
  }, {
    "annotationType" : "lombok.AllArgsConstructor",
    "values" : {
      "access" : "PRIVATE"
    }
  } ],
  "documentation" : " A {@link Constraint} that parses a human-friendly query string into a structured tree of constraints.\n <p>\n This class allows users to write intuitive search strings like:\n\n <pre>\n   \"error &amp; (critical | urgent) &amp; !resolved\"\n   \"&quot;exact phrase&quot; | partial* &amp; !excluded\"\n </pre>\n <p>\n The query string supports:\n <ul>\n   <li><b>Terms</b>: space-separated words, optionally with wildcards (*).</li>\n   <li><b>Exact phrases</b>: quoted strings (e.g., {@code \"full text\"}).</li>\n   <li><b>Operators</b>: <code>&amp;</code> (AND), <code>|</code> (OR), <code>!</code> (NOT), and parentheses for grouping.</li>\n   <li><b>Lookahead behavior</b>: Controlled via {@link #lookAheadForAllTerms} to mimic user-friendly search behavior.</li>\n </ul>\n\n <p>\n Wildcards:\n <ul>\n   <li>A trailing {@code *} enables prefix-matching (e.g., {@code hat*} matches {@code hatter}).</li>\n   <li>A leading {@code *} enables postfix-matching (e.g., {@code *hat} matches {@code chat}).</li>\n   <li>Both allows infix-matching (e.g., {@code *hat*} matches {@code groupchatting}).</li>\n </ul>\n\n <h2>Usage Examples</h2>\n <pre>{@code\n // Match documents containing both \"order\" and \"cancel\"\n QueryConstraint.query(\"order cancel\");\n\n // Match documents with \"error\" or \"failure\"\n QueryConstraint.query(\"error | failure\");\n\n // Match documents where \"payment\" appears but not \"test\"\n QueryConstraint.query(\"payment !test\");\n\n // Match documents containing a phrase\n QueryConstraint.query(\"\\\"order received\\\"\");\n }</pre>\n\n <p>\n If a {@link #lookAheadForAllTerms} flag is set to {@code true}, then every term is treated as a look-ahead match\n (e.g., {@code \"chat\"} will match \"chatbot\", \"chatter\", etc.). The query is applied over the configured document\n paths, or across all paths if none are set.\n\n <p>\n Internally, the query is decomposed into a structure of {@link ContainsConstraint}, {@link NotConstraint},\n {@link AllConstraint}, and {@link AnyConstraint} nodes that evaluate against document fields.\n\n\n <h2>Performance Considerations</h2>\n <ul>\n     <li>\n         Queries using a <strong>prefix</strong> or <strong>postfix</strong> wildcard (e.g., {@code user*} or {@code *name}) are resolved at the data store level and typically fast.\n     </li>\n     <li>\n         Queries using <strong>both prefix and postfix</strong> wildcards (e.g., {@code *log*}) are not natively supported by the backend and require <strong>in-memory filtering</strong>, which can be slow for large result sets.\n     </li>\n     <li>\n         <strong>Similarly, prefix or postfix matches with terms shorter than 3 characters</strong> are also evaluated in-memory.\n         <br>\n         <em>Note:</em> This limitation does <strong>not</strong> apply to complete word matches (i.e., without wildcards).\n         For example, {@code \"to\"} as an exact term is efficient, but {@code to*} or {@code *to} are not.\n     </li>\n     <li>\n         When possible, prefer longer terms and structure queries to enable efficient execution via the underlying document store.\n     </li>\n </ul>\n\n @see ContainsConstraint\n @see LookAheadConstraint\n",
  "typeParameters" : [ ],
  "superClass" : "io.fluxzero.common.api.search.constraints.PathConstraint",
  "interfaces" : [ ],
  "fields" : [ {
    "name" : "decompose",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint.decompose",
    "type" : "io.fluxzero.common.api.search.Constraint",
    "modifiers" : [ ],
    "annotations" : [ {
      "annotationType" : "lombok.ToString.Exclude",
      "values" : {}
    }, {
      "annotationType" : "lombok.EqualsAndHashCode.Exclude",
      "values" : {}
    }, {
      "annotationType" : "lombok.Getter",
      "values" : {
        "lazy" : "true"
      }
    }, {
      "annotationType" : "lombok.experimental.Accessors",
      "values" : {
        "fluent" : "true"
      }
    } ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "lookAheadForAllTerms",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint.lookAheadForAllTerms",
    "type" : "boolean",
    "modifiers" : [ ],
    "annotations" : [ {
      "annotationType" : "lombok.With",
      "values" : {}
    } ],
    "documentation" : " If true, all terms are treated as lookahead searches (i.e., match tokens that start with the term).\n",
    "constantValue" : null
  }, {
    "name" : "operator",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint.operator",
    "type" : "java.lang.String",
    "modifiers" : [ "final", "private", "static" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : "&|()!"
  }, {
    "name" : "paths",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint.paths",
    "type" : "java.util.List<java.lang.String>",
    "modifiers" : [ ],
    "annotations" : [ {
      "annotationType" : "lombok.With",
      "values" : {}
    } ],
    "documentation" : " The document paths to which this query applies. If empty, the constraint is applied globally.\n",
    "constantValue" : null
  }, {
    "name" : "query",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint.query",
    "type" : "java.lang.@lombok.NonNull String",
    "modifiers" : [ ],
    "annotations" : [ {
      "annotationType" : "lombok.NonNull",
      "values" : {}
    } ],
    "documentation" : " The raw query string entered by the user.\n",
    "constantValue" : null
  }, {
    "name" : "splitOnInnerAsterisk",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint.splitOnInnerAsterisk",
    "type" : "java.util.regex.Pattern",
    "modifiers" : [ "final", "private", "static" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "termPattern",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint.termPattern",
    "type" : "java.util.regex.Pattern",
    "modifiers" : [ "final", "private", "static" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  } ],
  "constructors" : [ {
    "name" : "QueryConstraint",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#QueryConstraint",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  } ],
  "methods" : [ {
    "name" : "createConstraints",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#createConstraints",
    "returnType" : "java.util.List<io.fluxzero.common.api.search.Constraint>",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "parts",
      "type" : "java.util.List<java.lang.String>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "handleGroupStart",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#handleGroupStart",
    "returnType" : "void",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "iterator",
      "type" : "java.util.ListIterator<java.lang.String>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "constraints",
      "type" : "java.util.List<io.fluxzero.common.api.search.Constraint>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "handleNot",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#handleNot",
    "returnType" : "void",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "iterator",
      "type" : "java.util.ListIterator<java.lang.String>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "constraints",
      "type" : "java.util.List<io.fluxzero.common.api.search.Constraint>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "handleOr",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#handleOr",
    "returnType" : "void",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "iterator",
      "type" : "java.util.ListIterator<java.lang.String>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "constraints",
      "type" : "java.util.List<io.fluxzero.common.api.search.Constraint>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "handleTerm",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#handleTerm",
    "returnType" : "void",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "term",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "constraints",
      "type" : "java.util.List<io.fluxzero.common.api.search.Constraint>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "matches",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#matches",
    "returnType" : "boolean",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "document",
      "type" : "io.fluxzero.common.search.Document",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Overrides {@link Constraint#matches(Document)} to evaluate a decomposed constraint tree. The parsing is done\n lazily and cached for reuse.\n"
  }, {
    "name" : "matches",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#matches",
    "returnType" : "boolean",
    "modifiers" : [ "protected" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "entry",
      "type" : "io.fluxzero.common.search.Document.Entry",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "document",
      "type" : "io.fluxzero.common.search.Document",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : " Not supported directly on a single document entry. Throws {@link UnsupportedOperationException}.\n"
  }, {
    "name" : "parsePart",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#parsePart",
    "returnType" : "void",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "part",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "iterator",
      "type" : "java.util.ListIterator<java.lang.String>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "constraints",
      "type" : "java.util.List<io.fluxzero.common.api.search.Constraint>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "query",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#query",
    "returnType" : "io.fluxzero.common.api.search.Constraint",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "query",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "lookAheadForAllTerms",
      "type" : "boolean",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "paths",
      "type" : "java.lang.String[]",
      "varArgs" : true,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : true,
    "documentation" : " Creates a {@link QueryConstraint} with optional lookahead behavior for terms.\n\n @param query                the query string\n @param lookAheadForAllTerms if true, all terms will behave like lookaheads (i.e., include trailing wildcard\n                             logic)\n @param paths                the paths to apply the query to\n"
  }, {
    "name" : "query",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#query",
    "returnType" : "io.fluxzero.common.api.search.Constraint",
    "modifiers" : [ "public", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "query",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "paths",
      "type" : "java.lang.String[]",
      "varArgs" : true,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : true,
    "documentation" : " Creates a {@link QueryConstraint} that parses and evaluates the given query string.\n\n @param query the human-readable query string\n @param paths one or more document paths to apply the query to\n @return a parsed and decomposed constraint\n"
  }, {
    "name" : "splitInTermsAndOperators",
    "qualifiedName" : "io.fluxzero.common.api.search.constraints.QueryConstraint#splitInTermsAndOperators",
    "returnType" : "java.util.List<java.lang.String>",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "query",
      "type" : "java.lang.String",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  } ],
  "enumConstants" : [ ],
  "recordComponents" : [ ],
  "nestedTypes" : [ ]
}
