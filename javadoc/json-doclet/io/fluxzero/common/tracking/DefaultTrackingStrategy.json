{
  "name" : "DefaultTrackingStrategy",
  "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy",
  "packageName" : "io.fluxzero.common.tracking",
  "kind" : "class",
  "modifiers" : [ "public" ],
  "annotations" : [ {
    "annotationType" : "lombok.extern.slf4j.Slf4j",
    "values" : {}
  } ],
  "documentation" : " Streaming strategy that allows multiple clients to concurrently consume a message stream. Messages are routed to\n clients based on the value of their segment. Each connected client handles a distinct range of segments.\n <p>\n Message segments are determined by the clients that publish the messages (usually based on the consistent hash of\n some routing key, like the value of a user id).\n <p>\n If a client joins or leaves the cluster the segment range mapped to each client is recalculated so messages may get\n routed differently than before.\n <p>\n Clients can safely join or leave the cluster at any time. The strategy guarantees that a message is not consumed by\n more than one client.\n",
  "typeParameters" : [ ],
  "superClass" : "java.lang.Object",
  "interfaces" : [ "io.fluxzero.common.tracking.TrackingStrategy" ],
  "fields" : [ {
    "name" : "clusters",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.clusters",
    "type" : "java.util.concurrent.ConcurrentHashMap<java.lang.String,io.fluxzero.common.tracking.TrackerCluster>",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "lastSeenIndex",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.lastSeenIndex",
    "type" : "long",
    "modifiers" : [ "private", "volatile" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "scheduler",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.scheduler",
    "type" : "io.fluxzero.common.TaskScheduler",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "segments",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.segments",
    "type" : "int",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "source",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.source",
    "type" : "io.fluxzero.common.tracking.MessageStore",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "sourceRegistration",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.sourceRegistration",
    "type" : "io.fluxzero.common.Registration",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "stopped",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.stopped",
    "type" : "boolean",
    "modifiers" : [ "private", "volatile" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  }, {
    "name" : "waitingTrackers",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy.waitingTrackers",
    "type" : "java.util.Map<io.fluxzero.common.tracking.Tracker,io.fluxzero.common.tracking.DefaultTrackingStrategy.WaitingTracker>",
    "modifiers" : [ "final", "private" ],
    "annotations" : [ ],
    "documentation" : null,
    "constantValue" : null
  } ],
  "constructors" : [ {
    "name" : "DefaultTrackingStrategy",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#DefaultTrackingStrategy",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "source",
      "type" : "io.fluxzero.common.tracking.MessageStore",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "DefaultTrackingStrategy",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#DefaultTrackingStrategy",
    "modifiers" : [ "public" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "source",
      "type" : "io.fluxzero.common.tracking.MessageStore",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "scheduler",
      "type" : "io.fluxzero.common.TaskScheduler",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "DefaultTrackingStrategy",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#DefaultTrackingStrategy",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "source",
      "type" : "io.fluxzero.common.tracking.MessageStore",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "scheduler",
      "type" : "io.fluxzero.common.TaskScheduler",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "segments",
      "type" : "int",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  } ],
  "methods" : [ {
    "name" : "adjustMaxSize",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#adjustMaxSize",
    "returnType" : "int",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "maxSize",
      "type" : "int",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "claimSegment",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#claimSegment",
    "returnType" : "int[]",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "claimSegment",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#claimSegment",
    "returnType" : "void",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "positionStore",
      "type" : "io.fluxzero.common.tracking.PositionStore",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "close",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#close",
    "returnType" : "void",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "disconnectTrackers",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#disconnectTrackers",
    "returnType" : "java.util.Set<io.fluxzero.common.tracking.Tracker>",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "predicate",
      "type" : "java.util.function.Predicate<io.fluxzero.common.tracking.Tracker>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "sendFinalEmptyBatch",
      "type" : "boolean",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "ensureMessageSegment",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#ensureMessageSegment",
    "returnType" : "io.fluxzero.common.api.SerializedMessage",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "message",
      "type" : "io.fluxzero.common.api.SerializedMessage",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "filter",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#filter",
    "returnType" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "messages",
      "type" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "segmentRange",
      "type" : "int[]",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "position",
      "type" : "io.fluxzero.common.api.tracking.Position",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "getBatch",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#getBatch",
    "returnType" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "segment",
      "type" : "int[]",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "position",
      "type" : "io.fluxzero.common.api.tracking.Position",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "batchSize",
      "type" : "int",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "getBatch",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#getBatch",
    "returnType" : "void",
    "modifiers" : [ "public" ],
    "annotations" : [ {
      "annotationType" : "java.lang.Override",
      "values" : {}
    } ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "positionStore",
      "type" : "io.fluxzero.common.tracking.PositionStore",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "getLastIndex",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#getLastIndex",
    "returnType" : "java.lang.Long",
    "modifiers" : [ "private" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "messages",
      "type" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "indexFromMillis",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#indexFromMillis",
    "returnType" : "long",
    "modifiers" : [ "private", "static" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "millisSinceEpoch",
      "type" : "long",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "onClusterUpdate",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#onClusterUpdate",
    "returnType" : "void",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "cluster",
      "type" : "io.fluxzero.common.tracking.TrackerCluster",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "onUpdate",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#onUpdate",
    "returnType" : "void",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "messages",
      "type" : "java.util.List<io.fluxzero.common.api.SerializedMessage>",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "position",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#position",
    "returnType" : "io.fluxzero.common.api.tracking.Position",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "positionStore",
      "type" : "io.fluxzero.common.tracking.PositionStore",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "segment",
      "type" : "int[]",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "purgeCeasedTrackers",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#purgeCeasedTrackers",
    "returnType" : "void",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "delay",
      "type" : "java.time.Duration",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "waitForMessages",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#waitForMessages",
    "returnType" : "void",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "emptyBatch",
      "type" : "io.fluxzero.common.api.tracking.MessageBatch",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "positionStore",
      "type" : "io.fluxzero.common.tracking.PositionStore",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  }, {
    "name" : "waitForUpdate",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy#waitForUpdate",
    "returnType" : "void",
    "modifiers" : [ "protected" ],
    "annotations" : [ ],
    "typeParameters" : [ ],
    "parameters" : [ {
      "name" : "tracker",
      "type" : "io.fluxzero.common.tracking.Tracker",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "emptyBatch",
      "type" : "io.fluxzero.common.api.tracking.MessageBatch",
      "varArgs" : false,
      "annotations" : [ ]
    }, {
      "name" : "followUp",
      "type" : "java.lang.Runnable",
      "varArgs" : false,
      "annotations" : [ ]
    } ],
    "thrownTypes" : [ ],
    "varArgs" : false,
    "documentation" : null
  } ],
  "enumConstants" : [ ],
  "recordComponents" : [ ],
  "nestedTypes" : [ {
    "name" : "WaitingTracker",
    "qualifiedName" : "io.fluxzero.common.tracking.DefaultTrackingStrategy$WaitingTracker",
    "kind" : "class",
    "modifiers" : [ "protected" ],
    "annotations" : [ {
      "annotationType" : "lombok.AllArgsConstructor",
      "values" : {}
    } ]
  } ]
}
